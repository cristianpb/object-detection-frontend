<div class="example-container mat-elevation-z8">
  <mat-card *ngIf="stats" class="example-card">
    <mat-card-header>
      <span mat-card-avatar class="material-icons">no_food</span>
      <mat-card-title>{{ stats.workerName }}</mat-card-title>
      <mat-card-subtitle>Max concurrency: {{ stats.concurrency }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p *ngFor="let register of stats.registered;">
        {{ register }}
      </p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="continousDetection()">Continous detection</button>
      <button *ngIf="continousDetectionId" mat-button (click)="killTracking(continousDetectionId)">Revoque</button>
    </mat-card-actions>
  </mat-card>



  <table *ngIf="tableWorkers.length > 0" mat-table [dataSource]="tableWorkers">
    <ng-container matColumnDef="workerValue">
      <th mat-header-cell *matHeaderCellDef>Worker </th>
      <td mat-cell *matCellDef="let element"> {{element.workerValue}} </td>
    </ng-container>

    <ng-container matColumnDef="taskName">
      <th mat-header-cell *matHeaderCellDef> Task name </th>
      <td mat-cell *matCellDef="let element"> {{element.taskName}} </td>
    </ng-container>

    <ng-container matColumnDef="schedule">
      <th mat-header-cell *matHeaderCellDef>Schedule</th>
      <td mat-cell *matCellDef="let element"> {{element.schedule}} </td>
    </ng-container>

    <ng-container matColumnDef="totalTasks">
      <th mat-header-cell *matHeaderCellDef>Total tasks</th>
      <td mat-cell *matCellDef="let element"> {{element.total}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <table mat-table [dataSource]="tableTasks" #tableTasksRef>
    <ng-container matColumnDef="uuid">
      <th mat-header-cell *matHeaderCellDef>ID </th>
      <td mat-cell *matCellDef="let element"> {{element.uuid}} </td>
    </ng-container>

    <ng-container matColumnDef="state">
      <th mat-header-cell *matHeaderCellDef>State</th>
      <td mat-cell *matCellDef="let element"> {{element.state}} </td>
    </ng-container>

    <ng-container matColumnDef="runtime">
      <th mat-header-cell *matHeaderCellDef>Runtime [seconds]</th>
      <td mat-cell *matCellDef="let element"> {{element.runtime | number:'1.0-2'}} </td>
    </ng-container>

    <ng-container matColumnDef="started">
      <th mat-header-cell *matHeaderCellDef>Started</th>
      <td mat-cell *matCellDef="let element"> {{element.started * 1000 | date:'EE d/LLL/y H:m:s'}} </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let element" (click)="killTracking(element.uuid)"> {{ element.state === "STARTED"? "kill": "" }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsTasks"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsTasks;"></tr>
  </table>
</div>
